<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VOCAL REPLAY LIVE - NE vs RGR</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --noakhali-cyan: #00f2ff;
            --rangpur-pink: #ff0055;
            --bg-black: #050505;
        }

        body, html {
            margin: 0; padding: 0; width: 100vw; height: 100vh;
            background-color: #000; color: white;
            font-family: 'Rajdhani', sans-serif;
            overflow: hidden; display: flex; justify-content: center; align-items: center;
        }

        /* 16:9 Professional Aspect Ratio */
        .broadcast-stage {
            width: 100vw; aspect-ratio: 16 / 9;
            background: radial-gradient(circle at center, #111 0%, #000 100%);
            display: flex; flex-direction: column;
            position: relative; border: 2px solid #222;
        }

        /* --- HEADER --- */
        .header {
            height: 110px; padding: 0 50px;
            display: flex; align-items: center; justify-content: space-between;
            background: rgba(0,0,0,0.9); border-bottom: 4px solid var(--noakhali-cyan);
            z-index: 10;
        }
        .brand { display: flex; align-items: center; gap: 20px; }
        .logo { width: 75px; height: 75px; border-radius: 50%; border: 3px solid var(--noakhali-cyan); box-shadow: 0 0 20px var(--noakhali-cyan); }
        .brand-name { font-family: 'Orbitron'; font-size: 2.5rem; font-weight: 900; }
        .brand-name span { color: var(--rangpur-pink); }

        .live-tag {
            background: rgba(255, 0, 0, 0.1); padding: 8px 25px; border-radius: 5px;
            border: 1px solid red; color: red; font-family: 'Orbitron'; font-weight: bold;
            display: flex; align-items: center; gap: 10px;
        }
        .dot { width: 12px; height: 12px; background: red; border-radius: 50%; animation: pulse 1s infinite; }

        /* --- MAIN CONTENT AREA --- */
        .content-area { flex: 1; position: relative; }

        /* CUSTOM API UI (PRIMARY) */
        #custom-ui {
            width: 100%; height: 100%; display: flex; flex-direction: column; 
            justify-content: center; align-items: center; transition: 0.5s;
        }
        .teams-grid { width: 100%; display: flex; justify-content: space-around; align-items: center; padding: 0 80px; }
        .team-abbr { font-family: 'Orbitron'; font-size: 8rem; font-weight: 900; }
        .ne-text { color: var(--noakhali-cyan); text-shadow: 0 0 40px var(--noakhali-cyan); }
        .rgr-text { color: var(--rangpur-pink); text-shadow: 0 0 40px var(--rangpur-pink); }
        
        .score-display {
            background: rgba(255,255,255,0.03); padding: 50px; border-radius: 30px;
            border: 1px solid rgba(255,255,255,0.1); text-align: center;
            min-width: 450px; backdrop-filter: blur(15px);
        }
        #main-score { font-family: 'Orbitron'; font-size: 9rem; margin: 0; line-height: 1; color: #fff; }
        #main-overs { font-size: 2.5rem; color: #aaa; margin-top: 20px; font-weight: 600; }

        /* GOOGLE/CRICBUZZ STYLE IFRAME (FALLBACK) */
        #fallback-ui {
            display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0;
            background: #000;
        }
        iframe { width: 100%; height: 100%; border: none; }

        /* --- TICKERS --- */
        .status-ticker {
            height: 40px; background: #111; border-bottom: 1px solid #333;
            display: flex; align-items: center; font-family: 'Orbitron'; font-size: 14px;
        }
        .ticker-label { background: var(--noakhali-cyan); color: #000; font-weight: 900; padding: 0 20px; height: 100%; display: flex; align-items: center; }
        #ticker-msg { padding-left: 20px; font-weight: bold; color: var(--noakhali-cyan); text-transform: uppercase; letter-spacing: 2px; }

        .bottom-ticker {
            height: 70px; background: #000; border-top: 5px solid var(--rangpur-pink);
            display: flex; align-items: center; overflow: hidden;
        }
        .marquee { display: flex; white-space: nowrap; animation: scroll 35s linear infinite; }
        .marquee span { padding: 0 100px; font-size: 1.8rem; font-weight: 700; color: #fff; text-transform: uppercase; }

        /* --- SUBSCRIBE ALERT --- */
        #sub-popup {
            position: absolute; left: -600px; bottom: 180px;
            background: linear-gradient(90deg, var(--rangpur-pink), #900);
            padding: 20px 60px; border-radius: 0 60px 60px 0;
            font-family: 'Orbitron'; font-weight: bold; font-size: 1.5rem;
            box-shadow: 0 0 40px var(--rangpur-pink); transition: 1s ease-in-out;
            z-index: 100;
        }
        #sub-popup.active { left: 0; }

        @keyframes scroll { from { transform: translateX(0); } to { transform: translateX(-50%); } }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <div class="broadcast-stage">
        
        <!-- Upper Match Ticker -->
        <div class="status-ticker">
            <div class="ticker-label">LIVE STATUS</div>
            <div id="ticker-msg">INITIALIZING DATA SOURCES...</div>
        </div>

        <!-- Official Header -->
        <div class="header">
            <div class="brand">
                <img src="https://yt3.googleusercontent.com/O8e6xK7cSMi0CaregRWysnoiQd9eBx9APoOb1QRABE5r5zKGOT3ZYgQ4U7WSgMtr3dQZzGeRvQ=s800-c-k-c0x00ffffff-no-rj" class="logo">
                <div class="brand-name">VOCAL <span>REPLAY</span></div>
            </div>
            <div class="live-tag">
                <div class="dot"></div> LIVE HD
            </div>
        </div>

        <!-- Score/Content Area -->
        <div class="content-area">
            <!-- PRIMARY BROADCAST UI -->
            <div id="custom-ui">
                <div class="teams-grid">
                    <div style="text-align: center;">
                        <div class="team-abbr ne-text">NE</div>
                        <div style="color: #444; letter-spacing: 5px; font-size: 1.2rem;">NOAKHALI</div>
                    </div>
                    <div class="score-display">
                        <h1 id="main-score">0/0</h1>
                        <div id="main-overs">0.0 OVERS</div>
                    </div>
                    <div style="text-align: center;">
                        <div class="team-abbr rgr-text">RGR</div>
                        <div style="color: #444; letter-spacing: 5px; font-size: 1.2rem;">RANGPUR</div>
                    </div>
                </div>
            </div>

            <!-- FALLBACK EXTERNAL UI -->
            <div id="fallback-ui">
                <!-- Using Crex as fallback because it fits 16:9 frames best for streams -->
                <iframe id="ext-frame" src=""></iframe>
            </div>
        </div>

        <!-- Subscribe Animation -->
        <div id="sub-popup">ðŸ”” SUBSCRIBE FOR LIVE BPL UPDATES!</div>

        <!-- Lower News Ticker -->
        <div class="bottom-ticker">
            <div class="marquee">
                <span>Welcome to Vocal Replay Live Broadcast - Subscribe and Support!</span>
                <span>BPL Match: Noakhali Express vs Rangpur Riders is LIVE now!</span>
                <span>HIT THE LIKE BUTTON FOR MORE LIVE BROADCASTS</span>
                <span>Welcome to Vocal Replay Live Broadcast - Subscribe and Support!</span>
            </div>
        </div>
    </div>

    <script>
        /**
         * MASTER BROADCAST LOGIC
         */
        const API_KEY = "6fe48c60-3178-431d-adc3-30c8d1ff7d50";
        const SEARCH_TARGET = "Rangpur";
        // Free Fallback Scoreboard (Styled to fit)
        const SCORE_FALLBACK = "https://www.crex.live/scoreboard/YHQ/1ZC/20th-Match/1E1/5T/ne-vs-rgr-20th-match-bangladesh-premier-league-2025-26/live";
        
        let errorCount = 0;

        async function syncBroadcast() {
            try {
                // Fetch live data
                const response = await fetch(`https://api.cricapi.com/v1/currentMatches?apikey=${API_KEY}`);
                const json = await response.json();

                if (json.status !== "success") throw new Error("API_FAIL");

                // Find the match
                const match = json.data.find(m => m.name.includes(SEARCH_TARGET) || m.teams.includes(SEARCH_TARGET));

                if (match) {
                    switchToPrimary();
                    let s = "0/0", o = "0.0";
                    if (match.score && match.score.length > 0) {
                        const current = match.score[match.score.length - 1];
                        s = `${current.r}/${current.w}`;
                        o = `${current.o} OVERS`;
                    }
                    document.getElementById('main-score').innerText = s;
                    document.getElementById('main-overs').innerText = o;
                    document.getElementById('ticker-msg').innerText = match.status.toUpperCase();
                    errorCount = 0;
                } else {
                    throw new Error("Match Not Found");
                }
            } catch (err) {
                console.warn("Primary API Connection Failed. Checking Fallback...");
                errorCount++;
                if (errorCount >= 2) {
                    switchToFallback();
                }
            }
        }

        function switchToPrimary() {
            document.getElementById('custom-ui').style.display = 'flex';
            document.getElementById('fallback-ui').style.display = 'none';
        }

        function switchToFallback() {
            const frame = document.getElementById('ext-frame');
            document.getElementById('custom-ui').style.display = 'none';
            document.getElementById('fallback-ui').style.display = 'block';
            document.getElementById('ticker-msg').innerText = "LIVE DATA SOURCE: BACKUP SATELLITE ACTIVE";
            
            // Set frame src if not set
            if (frame.src !== SCORE_FALLBACK) {
                frame.src = SCORE_FALLBACK;
            }
        }

        // Auto Subscribe Popup (Every 50 seconds)
        setInterval(() => {
            const popup = document.getElementById('sub-popup');
            popup.classList.add('active');
            setTimeout(() => popup.classList.remove('active'), 8000);
        }, 50000);

        // Score Sync (Every 60 seconds to save API credits)
        setInterval(syncBroadcast, 60000);
        syncBroadcast();

    </script>
</body>
</html>
